(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d12f2dce"],{8418:function(t,a,e){"use strict";var s=e("c04e"),c=e("9bf2"),n=e("5c6c");t.exports=function(t,a,e){var i=s(a);i in t?c.f(t,i,n(0,e)):t[i]=e}},"99af":function(t,a,e){"use strict";var s=e("23e7"),c=e("d039"),n=e("e8b5"),i=e("861d"),r=e("7b0b"),o=e("50c4"),l=e("8418"),d=e("65f0"),u=e("1dde"),p=e("b622"),h=e("2d00"),f=p("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",v=h>=51||!c((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),b=u("concat"),_=function(t){if(!i(t))return!1;var a=t[f];return void 0!==a?!!a:n(t)},C=!v||!b;s({target:"Array",proto:!0,forced:C},{concat:function(t){var a,e,s,c,n,i=r(this),u=d(i,0),p=0;for(a=-1,s=arguments.length;a<s;a++)if(n=-1===a?i:arguments[a],_(n)){if(c=o(n.length),p+c>g)throw TypeError(m);for(e=0;e<c;e++,p++)e in n&&l(u,p,n[e])}else{if(p>=g)throw TypeError(m);l(u,p++,n)}return u.length=p,u}})},b0c0:function(t,a,e){var s=e("83ab"),c=e("9bf2").f,n=Function.prototype,i=n.toString,r=/^\s*function ([^ (]*)/,o="name";s&&!(o in n)&&c(n,o,{configurable:!0,get:function(){try{return i.call(this).match(r)[1]}catch(t){return""}}})},b789:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-10 col-lg-8"},[e("h1",{staticClass:"text-center h2 bg-desktop p-4 mt-4"},[t._v("您的購物車")]),0==t.cart.carts?e("div",{staticClass:"text-center my-4"},[e("p",{staticClass:"text-content m-4"},[t._v("目前沒有商品喔")]),e("router-link",{staticClass:"btn btn-title px-4 py-2",attrs:{to:"/products"}},[t._v("繼續逛逛")])],1):e("div",[e("table",{staticClass:"table mt-4 table-hover"},[e("tbody",[t._m(0),t._l(t.cart.carts,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle",attrs:{width:"30"}},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removeCartItem(a.id)}}},[e("i",{staticClass:"fas fa-trash-alt"})])]),e("td",{staticClass:"d-none d-md-table-cell align-middle",attrs:{width:"120",height:"120"}},[e("img",{staticClass:"img-fluid",staticStyle:{cursor:"pointer"},attrs:{src:a.product.imageUrl,alt:""},on:{click:function(e){return t.getProduct(a.product.id)}}})]),e("td",{staticClass:"align-middle d-none d-md-table-cell"},[e("a",{attrs:{href:"#"},on:{click:function(e){return t.getProduct(a.product.id)}}},[t._v(t._s(a.product.title))]),a.coupon?e("small",{staticClass:"text-success d-block"},[t._v("已套用優惠卷")]):t._e()]),e("td",{staticClass:"align-middle d-none d-md-table-cell"},[e("div",{staticClass:"d-flex align-items-center"},[e("a",{staticClass:"btn btn-sm btn-title p-0 mr-2",staticStyle:{width:"25px",height:"25px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeQty(a.id,"-")}}},[t._v("-")]),t._v(" "+t._s(a.qty)+"/"+t._s(a.product.unit)+" "),e("a",{staticClass:"btn btn-sm btn-title p-0 ml-2",staticStyle:{width:"25px",height:"25px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeQty(a.id,"+")}}},[t._v("+")])])]),e("td",{staticClass:"align-middle text-right d-none d-md-table-cell"},[t._v(t._s(t._f("currency")(a.total)))]),e("td",{staticClass:"d-md-none",attrs:{colspan:"4"}},[e("table",{staticClass:"table table-borderless mb-0"},[e("tbody",[e("tr",[e("td",{staticClass:"p-1 align-middle h5"},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getProduct(a.product.id)}}},[t._v(t._s(a.product.title))]),a.coupon?e("small",{staticClass:"text-success d-block"},[t._v("已套用優惠卷")]):t._e()]),e("td",{staticClass:"p-1",attrs:{width:"100"}},[e("img",{staticClass:"img-fluid",staticStyle:{cursor:"pointer"},attrs:{src:a.product.imageUrl,alt:""},on:{click:function(e){return t.getProduct(a.product.id)}}})])]),e("tr",[e("td",{staticClass:"p-1"},[t._v("數量")]),e("td",{staticClass:"p-1 align-middle text-right",attrs:{width:"120"}},[e("div",{staticClass:"d-flex align-items-center justify-content-end"},[e("a",{staticClass:"btn btn-sm btn-title p-0 mr-2",staticStyle:{width:"25px",height:"25px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeQty(a.id,"-")}}},[t._v("-")]),t._v(" "+t._s(a.qty)+"/"+t._s(a.product.unit)+" "),e("a",{staticClass:"btn btn-sm btn-title p-0 ml-2",staticStyle:{width:"25px",height:"25px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeQty(a.id,"+")}}},[t._v("+")])])])]),e("tr",[e("td",{staticClass:"p-1"},[t._v("小計")]),e("td",{staticClass:"p-1 align-middle text-right"},[t._v(t._s(t._f("currency")(a.total)))])])])])])])}))],2),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v("總計")]),e("td",{staticClass:"text-right",attrs:{width:"100"}},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t.cart.total!==t.cart.final_total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"4"}},[t._v("折扣價")]),e("td",{staticClass:"text-right text-success",attrs:{width:"100"}},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e()])]),e("div",{staticClass:"form-group mb-4"},[e("label",{attrs:{for:"discount-code"}},[t._v("✦ 輸入折扣碼「ilovesushi」，和我們一同歡慶開幕吧！")]),e("div",{staticClass:"input-group input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",name:"",id:"discount-code",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-title",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v(" 套用優惠碼 ")])])])]),e("div",{staticClass:"text-center mb-4"},[e("router-link",{staticClass:"btn btn-title px-4 py-2 mr-2",attrs:{to:"/products"}},[t._v("繼續逛逛")]),e("router-link",{staticClass:"btn btn-online px-4 py-2",attrs:{to:"/checkout"}},[t._v("前往結帳")])],1)])])])])],1)},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",{staticClass:"d-none d-md-table-row"},[e("th",{attrs:{scope:"col"}}),e("th",{attrs:{scope:"col"}}),e("th",{attrs:{scope:"col"}},[t._v("品名")]),e("th",{attrs:{scope:"col",width:"140"}},[t._v("數量")]),e("th",{attrs:{scope:"col",width:"80"}},[t._v("單價")])])}],n=(e("99af"),e("c740"),e("b0c0"),{data:function(){return{cart:{},isLoading:!1,coupon_code:""}},methods:{getProduct:function(t){this.$router.push({path:"/product/".concat(t)})},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/cart");t.isLoading=!0,this.$http.get(a).then((function(a){t.cart=a.data.data,t.$emit("getCartNum",t.cart.carts.length),t.isLoading=!1}))},removeCartItem:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/cart/").concat(t);a.isLoading=!0,this.$http.delete(e).then((function(t){a.$bus.$emit("message:push",t.data.message,"success"),a.getCart(),a.isLoading=!1}))},addCouponCode:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/coupon"),e={code:t.coupon_code};t.isLoading=!0,this.$http.post(a,{data:e}).then((function(a){a.data.success?t.$bus.$emit("message:push",a.data.message,"success"):t.$bus.$emit("message:push",a.data.message,"danger"),t.getCart(),t.isLoading=!1}))},changeQty:function(t,a){var e,s=this.cart.carts,c=s.findIndex((function(a){return a.id===t})),n=s[c];"-"===a?(n.qty--,0===n.qty?this.removeCartItem(t):(n.total-=parseInt(n.product.price),this.cart.total-=parseInt(n.product.price),e=n.coupon?parseInt(n.product.price)*parseInt(n.coupon.percent)/100:parseInt(n.product.price),n.final_total-=e,this.cart.final_total-=e)):"+"===a&&(n.qty++,n.total+=parseInt(n.product.price),this.cart.total+=parseInt(n.product.price),e=n.coupon?parseInt(n.product.price)*parseInt(n.coupon.percent)/100:parseInt(n.product.price),n.final_total+=e,this.cart.final_total+=e)}},created:function(){this.$emit("sendRoute",this.$route.name),this.getCart()}}),i=n,r=e("2877"),o=Object(r["a"])(i,s,c,!1,null,"49232c3f",null);a["default"]=o.exports},c740:function(t,a,e){"use strict";var s=e("23e7"),c=e("b727").findIndex,n=e("44d2"),i=e("ae40"),r="findIndex",o=!0,l=i(r);r in[]&&Array(1)[r]((function(){o=!1})),s({target:"Array",proto:!0,forced:o||!l},{findIndex:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}}),n(r)}}]);
//# sourceMappingURL=chunk-d12f2dce.f0a702ca.js.map