(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d12f2dce"],{8418:function(t,a,e){"use strict";var i=e("c04e"),c=e("9bf2"),n=e("5c6c");t.exports=function(t,a,e){var s=i(a);s in t?c.f(t,s,n(0,e)):t[s]=e}},"99af":function(t,a,e){"use strict";var i=e("23e7"),c=e("d039"),n=e("e8b5"),s=e("861d"),r=e("7b0b"),o=e("50c4"),d=e("8418"),l=e("65f0"),u=e("1dde"),h=e("b622"),p=e("2d00"),f=h("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",m=p>=51||!c((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),b=u("concat"),C=function(t){if(!s(t))return!1;var a=t[f];return void 0!==a?!!a:n(t)},_=!m||!b;i({target:"Array",proto:!0,forced:_},{concat:function(t){var a,e,i,c,n,s=r(this),u=l(s,0),h=0;for(a=-1,i=arguments.length;a<i;a++)if(n=-1===a?s:arguments[a],C(n)){if(c=o(n.length),h+c>v)throw TypeError(g);for(e=0;e<c;e++,h++)e in n&&d(u,h,n[e])}else{if(h>=v)throw TypeError(g);d(u,h++,n)}return u.length=h,u}})},b0c0:function(t,a,e){var i=e("83ab"),c=e("9bf2").f,n=Function.prototype,s=n.toString,r=/^\s*function ([^ (]*)/,o="name";i&&!(o in n)&&c(n,o,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(t){return""}}})},b789:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-10 col-lg-8"},[e("h1",{staticClass:"text-center h2 bg-desktop p-4 mt-4"},[t._v("您的購物車")]),0==t.cart.carts?e("div",{staticClass:"text-center my-4"},[e("p",{staticClass:"text-content m-4"},[t._v("目前沒有商品喔")]),e("router-link",{staticClass:"btn btn-title px-4 py-2",attrs:{to:"/products"}},[t._v("繼續逛逛")])],1):e("div",[e("table",{staticClass:"table mt-4 table-hover"},[e("tbody",[t._m(0),t._l(t.cart.carts,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle",attrs:{width:"30"}},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removeCartItem(a.id)}}},[e("i",{staticClass:"fas fa-trash-alt"})])]),e("td",{staticClass:"d-none d-md-table-cell align-middle",attrs:{width:"120",height:"120"}},[e("img",{staticClass:"img-fluid",staticStyle:{cursor:"pointer"},attrs:{src:a.product.imageUrl,alt:""},on:{click:function(e){return t.getProduct(a.product.id)}}})]),e("td",{staticClass:"align-middle d-none d-md-table-cell"},[e("a",{attrs:{href:"#"},on:{click:function(e){return t.getProduct(a.product.id)}}},[t._v(t._s(a.product.title))])]),e("td",{staticClass:"align-middle d-none d-md-table-cell"},[e("div",{staticClass:"d-flex align-items-center"},[e("a",{staticClass:"btn btn-sm btn-title p-0 mr-2",staticStyle:{width:"25px",height:"25px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeQty(a.id,"-")}}},[t._v("-")]),t._v(" "+t._s(a.qty)+"/"+t._s(a.product.unit)+" "),e("a",{staticClass:"btn btn-sm btn-title p-0 ml-2",staticStyle:{width:"25px",height:"25px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeQty(a.id,"+")}}},[t._v("+")])])]),e("td",{staticClass:"align-middle text-right d-none d-md-table-cell"},[t._v(t._s(t._f("currency")(a.total)))]),e("td",{staticClass:"d-md-none",attrs:{colspan:"4"}},[e("table",{staticClass:"table table-borderless mb-0"},[e("tbody",[e("tr",[e("td",{staticClass:"p-1 align-middle h5"},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getProduct(a.product.id)}}},[t._v(t._s(a.product.title))])]),e("td",{staticClass:"p-1",attrs:{width:"100"}},[e("img",{staticClass:"img-fluid",staticStyle:{cursor:"pointer"},attrs:{src:a.product.imageUrl,alt:""},on:{click:function(e){return t.getProduct(a.product.id)}}})])]),e("tr",[e("td",{staticClass:"p-1"},[t._v("數量")]),e("td",{staticClass:"p-1 align-middle text-right",attrs:{width:"120"}},[e("div",{staticClass:"d-flex align-items-center justify-content-end"},[e("a",{staticClass:"btn btn-sm btn-title p-0 mr-2",staticStyle:{width:"25px",height:"25px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeQty(a.id,"-")}}},[t._v("-")]),t._v(" "+t._s(a.qty)+"/"+t._s(a.product.unit)+" "),e("a",{staticClass:"btn btn-sm btn-title p-0 ml-2",staticStyle:{width:"25px",height:"25px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeQty(a.id,"+")}}},[t._v("+")])])])]),e("tr",[e("td",{staticClass:"p-1"},[t._v("小計")]),e("td",{staticClass:"p-1 align-middle text-right"},[t._v(t._s(t._f("currency")(a.total)))])])])])])])}))],2),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v("總計")]),e("td",{staticClass:"text-right",attrs:{width:"100"}},[t._v(t._s(t._f("currency")(t.cart.total)))])])])]),e("div",{staticClass:"text-center mb-4"},[e("router-link",{staticClass:"btn btn-title px-4 py-2 mr-2",attrs:{to:"/products"}},[t._v("繼續逛逛")]),e("a",{staticClass:"btn btn-online px-4 py-2",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.checkout(a)}}},[t._v("前往結帳")])],1)])])])])],1)},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",{staticClass:"d-none d-md-table-row"},[e("th",{attrs:{scope:"col"}}),e("th",{attrs:{scope:"col"}}),e("th",{attrs:{scope:"col"}},[t._v("品名")]),e("th",{attrs:{scope:"col",width:"140"}},[t._v("數量")]),e("th",{attrs:{scope:"col",width:"80"}},[t._v("單價")])])}],n=(e("99af"),e("c740"),e("4160"),e("b0c0"),e("159b"),{data:function(){return{cart:{},isLoading:!1,coupon_code:""}},methods:{getProduct:function(t){this.$router.push({path:"/product/".concat(t)})},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/cart");t.isLoading=!0,this.$http.get(a).then((function(a){t.cart=a.data.data,t.$emit("getCartNum",t.cart.carts.length),t.isLoading=!1}))},removeCartItem:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/cart/").concat(t);a.isLoading=!0,this.$http.delete(e).then((function(t){a.$bus.$emit("message:push",t.data.message,"success"),a.getCart(),a.isLoading=!1}))},removeOldCartQty:function(t){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/cart/").concat(t);this.$http.delete(a)},addtoCart:function(t,a){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/cart"),i={product_id:t,qty:a};this.$http.post(e,{data:i})},changeQty:function(t,a){var e=this.cart.carts,i=e.findIndex((function(a){return a.id===t})),c=e[i],n=parseInt(c.product.price);"-"===a?(c.qty--,0===c.qty?this.removeCartItem(t):(c.total-=n,this.cart.total-=n)):"+"===a&&(c.qty++,c.total+=n,this.cart.total+=n)},checkout:function(){var t=this,a=this;a.isLoading=!0,a.cart.carts.forEach((function(a){t.addtoCart(a.product_id,a.qty),t.removeOldCartQty(a.id)})),a.timeout=setTimeout((function(){a.isLoading=!1,a.$router.push("/checkout")}),1e3)}},created:function(){this.$emit("sendRoute",this.$route.name),this.getCart()}}),s=n,r=e("2877"),o=Object(r["a"])(s,i,c,!1,null,"2caa73ed",null);a["default"]=o.exports},c740:function(t,a,e){"use strict";var i=e("23e7"),c=e("b727").findIndex,n=e("44d2"),s=e("ae40"),r="findIndex",o=!0,d=s(r);r in[]&&Array(1)[r]((function(){o=!1})),i({target:"Array",proto:!0,forced:o||!d},{findIndex:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}}),n(r)}}]);
//# sourceMappingURL=chunk-d12f2dce.da012644.js.map