(function(e){function t(t){for(var o,c,u=t[0],i=t[1],s=t[2],d=0,f=[];d<u.length;d++)c=u[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);h&&h(t);while(f.length)f.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,c=1;c<n.length;c++){var u=n[c];0!==a[u]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},c={app:0},a={app:0},r=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1862062e":"b7e640cc","chunk-233746df":"e0001e87","chunk-26d80e9e":"024c8c67","chunk-2d0e2114":"54dfbc94","chunk-2d0eecae":"0d7d847b","chunk-2e2348c0":"1f56b000","chunk-7f7e1b3c":"56072184","chunk-85cca904":"54b323ef","chunk-a41a8a3a":"38aafae7","chunk-066c501b":"3ab378c0","chunk-7ffad9eb":"92422e71","chunk-aa963b64":"f0188a1d","chunk-c2ca0fb4":"9e98eb67","chunk-ee132a46":"efe111cf"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-1862062e":1,"chunk-233746df":1,"chunk-26d80e9e":1,"chunk-2e2348c0":1,"chunk-7f7e1b3c":1,"chunk-85cca904":1,"chunk-a41a8a3a":1,"chunk-066c501b":1,"chunk-7ffad9eb":1};c[e]?t.push(c[e]):0!==c[e]&&n[e]&&t.push(c[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-1862062e":"8b9e7c58","chunk-233746df":"6ed24943","chunk-26d80e9e":"49a7a156","chunk-2d0e2114":"31d6cfe0","chunk-2d0eecae":"31d6cfe0","chunk-2e2348c0":"5e91d8b0","chunk-7f7e1b3c":"ace2113d","chunk-85cca904":"a7e30662","chunk-a41a8a3a":"d6f291de","chunk-066c501b":"5ef6b4d8","chunk-7ffad9eb":"575f2441","chunk-aa963b64":"31d6cfe0","chunk-c2ca0fb4":"31d6cfe0","chunk-ee132a46":"31d6cfe0"}[e]+".css",a=i.p+o,r=document.getElementsByTagName("link"),u=0;u<r.length;u++){var s=r[u],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===o||d===a))return t()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){s=f[u],d=s.getAttribute("data-href");if(d===o||d===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var o=t&&t.target&&t.target.src||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete c[e],h.parentNode.removeChild(h),n(r)},h.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){c[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=r);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=u(e);var f=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(h);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+o+": "+c+")",f.name="ChunkLoadError",f.type=o,f.request=c,n[1](f)}a[e]=void 0}};var h=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/sagasushi/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var h=d;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("4160"),n("b64b"),n("159b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),c=(n("99af"),n("d81d"),n("a434"),n("2f62")),a=n("bc3a"),r=n.n(a);o["a"].use(c["a"]);var u=new c["a"].Store({strict:!0,state:{products:[],product:{},cart:{},order:{},orders:[],pagination:{},routeName:"",category:"所有商品",messages:[],favorite:[],status:{isLoading:!1,isLogin:!1,adIsShow:!0}},actions:{updateLoading:function(e,t){e.commit("LOADING",t)},getProducts:function(e){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/products/all");e.commit("LOADING",!0),r.a.get(t).then((function(t){e.commit("PRODUCTS",t.data.products),e.commit("LOADING",!1)}))},goProductDetail:function(e,t){var n=t.id,o=t.router;window.document.body.scrollTop=0,window.document.documentElement.scrollTop=0,o.push({path:"/product/".concat(n)})},getProduct:function(e,t){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/product/").concat(t);e.commit("LOADING",!0),r.a.get(n).then((function(t){e.commit("PRODUCT",t.data.product),e.commit("LOADING",!1)}))},getCart:function(e){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/cart");e.commit("LOADING",!0),r.a.get(t).then((function(t){e.commit("CART",t.data.data),e.commit("LOADING",!1)}))},addtoCart:function(e,t){var n=t.id,o=t.qty,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/cart");e.commit("LOADING",!0);var a={product_id:n,qty:o};r.a.post(c,{data:a}).then((function(t){e.dispatch("updateMessage",{message:t.data.message,status:"success"}),e.commit("LOADING",!1),e.dispatch("getCart")}))},removeCartItem:function(e,t){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/cart/").concat(t);e.commit("LOADING",!0),r.a.delete(n).then((function(t){e.dispatch("updateMessage",{message:t.data.message,status:"success"}),e.commit("LOADING",!1),e.dispatch("getCart")}))},getPagination:function(e,t){e.commit("PAGINATION",t)},getOrders:function(e,t){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/orders?page=").concat(t);e.commit("LOADING",!0),r.a.get(n).then((function(t){e.commit("ORDERS",t.data.orders),e.dispatch("getPagination",t.data.pagination),e.commit("LOADING",!1)}))},getOrder:function(e,t){var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("owen","/order/").concat(t);e.commit("LOADING",!0),r.a.get(n).then((function(t){e.commit("ORDER",t.data.order),e.commit("LOADING",!1)}))},setIsLogin:function(e,t){e.commit("ISLOGIN",t)},setRouteName:function(e,t){e.commit("ROUTENAME",t)},changeCategory:function(e,t){window.document.body.scrollTop=0,window.document.documentElement.scrollTop=0,e.commit("CATEGORY",t)},updateMessage:function(e,t){var n=Math.floor(new Date/1e3);t.timestamp=n,e.commit("ALERTMESSAGE",t),setTimeout((function(){e.commit("REMOVEALERTWITHTIMIMG",t.timestamp)}),5e3)},removeMessage:function(e,t){e.commit("REMOVEALERT",t)},closeAd:function(e){e.commit("ADISSHOW",!1)},setFavorite:function(e,t){var n=t.item,o=t.favoriteIndex,c=t.productIndex;if(-1===o){var a="add";e.commit("FAVORITE",{item:n,productIndex:c,method:a}),e.dispatch("updateMessage",{message:"已加入我的最愛",status:"success"})}else{var r="del";e.commit("FAVORITE",{favoriteIndex:o,productIndex:c,method:r}),e.dispatch("updateMessage",{message:"已刪除我的最愛",status:"success"})}var u=e.state.favorite.map((function(e){return e.id}));localStorage.setItem("favorite",JSON.stringify(u))}},mutations:{LOADING:function(e,t){e.status.isLoading=t},PRODUCTS:function(e,t){e.products=t,e.products.forEach((function(e){o["a"].set(e,"isLike",!1)}));var n=JSON.parse(localStorage.getItem("favorite"))||[];n.length&&e.products.forEach((function(t){n.forEach((function(n){t.id===n&&(t.isLike=!0,e.favorite.push(t))}))})),console.log(e.products)},PRODUCT:function(e,t){e.product=t},CART:function(e,t){e.cart=t},ORDER:function(e,t){e.order=t},ORDERS:function(e,t){e.orders=t},PAGINATION:function(e,t){e.pagination=t},ISLOGIN:function(e,t){e.status.isLogin=t},ROUTENAME:function(e,t){e.routeName=t},CATEGORY:function(e,t){e.category=t},ALERTMESSAGE:function(e,t){e.messages.push(t)},REMOVEALERT:function(e,t){e.messages.splice(t,1)},REMOVEALERTWITHTIMIMG:function(e,t){e.messages.forEach((function(n,o){n.timestamp===t&&e.messages.splice(o,1)}))},ADISSHOW:function(e,t){e.status.adIsShow=t},FAVORITE:function(e,t){"add"===t.method?(e.favorite.push(t.item),e.products[t.productIndex].isLike=!0):"del"===t.method&&(e.favorite.splice(t.favoriteIndex,1),e.products[t.productIndex].isLike=!1)}},getters:{products:function(e){return e.products},product:function(e){return e.product},favorite:function(e){return e.favorite},cart:function(e){return e.cart},order:function(e){return e.order},orders:function(e){return e.orders},pagination:function(e){return e.pagination},activeLink:function(e){return e.routeName},category:function(e){return e.category},isLoading:function(e){return e.status.isLoading},isLogin:function(e){return e.status.isLogin},adIsShow:function(e){return e.status.adIsShow},messages:function(e){return e.messages}}}),i=(n("15f5"),n("7051"),n("a7fe")),s=n.n(i),d=(n("4989"),n("9062")),f=n.n(d),h=(n("e40d"),n("7bb1")),p=n("4c93"),m=n("60d4"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("loading",{attrs:{active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}}),n("div",{class:{ad:e.adIsShow,noAd:!e.adIsShow}},[n("router-view")],1)],1)},g=[],b=n("5530"),v={name:"App",computed:Object(b["a"])({},Object(c["b"])(["isLoading","adIsShow"])),created:function(){this.$store.dispatch("getProducts"),this.$store.dispatch("getCart")}},k=v,O=(n("5c0b"),n("2877")),I=Object(O["a"])(k,l,g,!1,null,null,null),A=I.exports,E=(n("d3b7"),n("8c4f"));o["a"].use(E["a"]);var L=[{path:"*",redirect:"login"},{path:"/login",name:"Login",component:function(){return n.e("chunk-26d80e9e").then(n.bind(null,"a55b"))}},{path:"/",component:function(){return n.e("chunk-2e2348c0").then(n.bind(null,"a6fb"))},children:[{path:"",name:"Home",component:function(){return Promise.all([n.e("chunk-a41a8a3a"),n.e("chunk-7ffad9eb")]).then(n.bind(null,"bb51"))}},{path:"products",name:"Products",component:function(){return n.e("chunk-7f7e1b3c").then(n.bind(null,"e6dc"))}},{path:"product/:id",name:"ProductDetail",component:function(){return Promise.all([n.e("chunk-a41a8a3a"),n.e("chunk-066c501b")]).then(n.bind(null,"5f47"))}},{path:"cart",name:"Cart",component:function(){return n.e("chunk-aa963b64").then(n.bind(null,"b789"))}},{path:"checkout",name:"Checkout",component:function(){return n.e("chunk-2d0e2114").then(n.bind(null,"7cb4"))}},{path:"checkout/:orderId",name:"Payment",component:function(){return n.e("chunk-c2ca0fb4").then(n.bind(null,"1175"))}},{path:"order",name:"Order",component:function(){return n.e("chunk-233746df").then(n.bind(null,"cf2a"))}}]},{path:"/admin",name:"Dashboard",component:function(){return n.e("chunk-85cca904").then(n.bind(null,"0c7c"))},children:[{path:"products",name:"AdminProducts",component:function(){return n.e("chunk-ee132a46").then(n.bind(null,"aa93"))},meta:{requiresAuth:!0}},{path:"coupon",name:"AdminCoupon",component:function(){return n.e("chunk-2d0eecae").then(n.bind(null,"b8c6"))},meta:{requiresAuth:!0}},{path:"order",name:"AdminOrder",component:function(){return n.e("chunk-1862062e").then(n.bind(null,"b9ab"))},meta:{requiresAuth:!0}}]}],w=new E["a"]({mode:"history",base:"/sagasushi/",routes:L}),y=w;o["a"].prototype.$bus=new o["a"];n("a9e3"),n("b680"),n("ac1f"),n("5319");var T=function(e){var t=Number(e);return"$".concat(t.toFixed(0).replace(/./g,(function(e,t,n){var o=t&&"."!==e&&(n.length-t)%3===0?", ".concat(e).replace(/\s/g,""):e;return o})))};function S(e){e=new Date(1e3*e);var t=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",o=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ";e.getHours(),e.getHours(),e.getMinutes(),e.getMinutes(),e.getSeconds(),e.getSeconds();return t+n+o}o["a"].use(s.a,r.a),o["a"].component("Loading",f.a),o["a"].filter("currency",T),o["a"].filter("date",S),Object.keys(p).forEach((function(e){Object(h["c"])(e,p[e])})),Object(h["d"])("zh_TW",m),o["a"].component("ValidationObserver",h["a"]),o["a"].component("ValidationProvider",h["b"]),o["a"].config.productionTip=!1,r.a.defaults.withCredentials=!0,o["a"].config.productionTip=!1,new o["a"]({router:y,store:u,render:function(e){return e(A)}}).$mount("#app"),y.beforeEach((function(e,t,n){if(e.meta.requiresAuth){var o="".concat("https://vue-course-api.hexschool.io","/api/user/check");r.a.post(o).then((function(e){e.data.success?n():n({path:"/login"})}))}else n()}))},"5c0b":function(e,t,n){"use strict";var o=n("9c0c"),c=n.n(o);c.a},"9c0c":function(e,t,n){}});
//# sourceMappingURL=app.6a09d81c.js.map